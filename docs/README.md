> **Note**: This documentation was primarily generated by AI (Claude Sonnet 4.5). While the content is derived from the thesis, inaccuracies may occur. You can open an issue or PR for reporting inaccuracies or unclear explanations.

# Trale Documentation

Welcome to the Trale documentation! Trale is a Lean 4 implementation of the Trocq framework for proof transfer.

## Quick Links

- **[Getting Started Guide](getting-started.md)** - Start here! Complete tutorial for beginners
- **[Examples Guide](examples.md)** - Walkthrough of key examples with detailed explanations
- **[Theory Overview](theory.md)** - Mathematical foundations of the Trocq framework
- **[Implementation Details](implementation.md)** - Technical details of the Lean implementation

## What is Trale?

Trale enables automatic proof transfer between different type representations. Instead of duplicating proofs for similar structures, you can:

1. Prove theorems on simple, convenient types (like `Nat`)
2. Define parametric relations to other types (like `Zmod5`)
3. Use the `trale` tactic to automatically transfer proofs

## Documentation Structure

### For Beginners

1. **[Getting Started](getting-started.md)**
   - Installation instructions
   - Your first proof transfer (complete walkthrough)
   - Understanding the components
   - Common patterns
   - Troubleshooting guide

### For Users

2. **[Examples Guide](examples.md)**
   - Complete Zmod5 example explained
   - Comparing proof approaches
   - Manual vs automated transfer
   - Advanced examples (summable sequences, induction principles)
   - Tips for creating your own examples

### For Developers

3. **[Implementation Details](implementation.md)**
   - Core structures (Param, MapType)
   - Constructing parametric relations
   - Forgetful and flip functors
   - Glueing
   - Automation and tactics
   - Performance considerations

### For Theorists

4. **[Theory Overview](theory.md)**
   - Introduction to proof transfer
   - Trocq primitives
   - Property hierarchy
   - Characterizing relations
   - Type formers (arrow and Pi types)
   - Universe relations

## Quick Start Example

```lean
import Trale.Utils.Basic
import Trale.Utils.Attr

-- Define your type
abbrev Zmod5 := Fin 5

-- Connect to Nat
def repr5 (a : Zmod5) : Nat := a.val
def mod5 (n : Nat) : Zmod5 := ⟨n % 5, proof⟩
lemma repr5K : ∀ a, mod5 (repr5 a) = a := proof

-- Create parametric relation
instance : Param2a4 Zmod5 Nat := by tr_from_map repr5K

-- Define operation transport
@[trale]
def R_add (aR : tr.R a a') (bR : tr.R b b')
  : tr.R (a + b) (a' + b') := proof

-- Use it!
theorem example : ∀ a b : Zmod5, a + b = b + a := by
  trale
  omega
```

## Key Concepts at a Glance

### Parametric Relations

A `Param` connects two types through a relation `R` and transport functions in both directions. The numbers indicate property levels:

- `Param00`: Just the relation
- `Param10`: Add covariant map
- `Param2a0`: Add proof that map captures relation  
- `Param42b`: Split injection (injective with inverse)
- `Param44`: Full equivalence

### The @[trale] Attribute

Marks transport lemmas for automatic use:

```lean
@[trale]
def R_operation
  (aR : tr.R a a')  -- Inputs related
  : tr.R (operation a) (operation a')  -- Outputs related
```

### The trale Tactic

Automatically transfers proofs between related types:

```lean
theorem on_simple_type : Property α := proof_using_automation

theorem on_complex_type : Property β := by
  trale  -- Automatically transfers from α
  proof_using_automation
```

## Credits

Trale implements the **Trocq framework** developed by:
- Cyril Cohen
- Enzo Crance  
- Assia Mahboubi

Paper: [Trocq: Proof Transfer for Free, With or Without Univalence](https://arxiv.org/abs/2310.14022)

Trale implementation by Vincent Kuhlmann (Utrecht University, 2025).

## Getting Help

- **GitHub Issues**: Report bugs or request features
- **Lean Zulip**: Ask questions in the Lean community
- **Documentation**: Start with [getting-started.md](getting-started.md)

---

**Ready to get started?** Head to the [Getting Started Guide](getting-started.md)!
